(this["webpackJsonpknative-sample-ui"]=this["webpackJsonpknative-sample-ui"]||[]).push([[0],{24:function(e,a,s){},32:function(e,a,s){"use strict";s.r(a);var n=s(1),r=s(17),c=s.n(r),t=(s(24),s(25),s(11)),l=s(2),o=s(8),i=s(4),d=s(19);var j=s(0),m=function(e){var a=e.formErrors;return Object(j.jsx)("div",{children:Object.keys(a).map((function(e,s){return a[e].length>0?Object(j.jsxs)("p",{className:"alert alert-warning",children:[e," ",a[e]]},e):""}))})},b=function(e){var a=e.loading;return Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-sm-2"}),Object(j.jsxs)("div",{className:"col-sm-8",children:[a&&Object(j.jsx)("div",{className:"progress",children:Object(j.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-animated w-100",role:"progressbar","aria-valuenow":100,"aria-valuemin":0,"aria-valuemax":100})}),Object(j.jsx)("div",{className:"col-sm-2"})]})]})},h=function(e){var a=e.responseMessage,s=e.responseError;return Object(j.jsx)("div",{className:"row mt-3",children:Object(j.jsxs)("div",{className:"col-sm-12",children:[a&&Object(j.jsxs)("div",{className:"alert alert-success",children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("label",{htmlFor:"id",className:"col-sm-2",children:"Id : "}),Object(j.jsx)("span",{className:"col-sm-4",children:a.id})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("label",{htmlFor:"message",className:"col-sm-2",children:"Recieved : "}),Object(j.jsx)("span",{className:"col-sm-4",children:a.received})]}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("label",{htmlFor:"acked",className:"col-sm-2",children:"Acked : "}),Object(j.jsx)("span",{className:"col-sm-4",children:a.ack})]})]}),s&&Object(j.jsx)("div",{className:"alert alert-warning",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("span",{className:"col-sm-4",children:s})})})]})})},u=function(e){e.payload;var a=Object(n.useState)({payload:"dummy payload",delay:100,formErrors:{payload:"",delay:""},loading:!1,payloadValid:!0,delayValid:!0,formValid:!0,responseMessage:void 0,responseError:""}),s=Object(d.a)(a,2),r=s[0],c=s[1],t=function(e,a){c((function(e){return Object(i.a)(Object(i.a)({},e),{},{loading:!0})})),function(e,a){return fetch("/messages",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({payload:e,delay:a})}).then((function(e){return e.json()})).then((function(e){return e}))}(e,a).then((function(e){c((function(a){return Object(i.a)(Object(i.a)({},a),{},{responseMessage:e,loading:!1})}))})).catch((function(e){c((function(a){return Object(i.a)(Object(i.a)({},a),{},{responseError:e.message,loading:!1})}))}))},l=function(e){var a=e.target.name,s=e.target.value;u(a,s)},u=function(e,a){var s=r.formErrors,n=r.payloadValid,t=r.delayValid;switch(e){case"payload":n=a.length>=2,s.payload=n?"":" should have atleast 2 characters";break;case"delay":t=!isNaN(a),s.delay=t?"":" is not valid"}c((function(r){var c;return Object(i.a)(Object(i.a)({},r),{},(c={},Object(o.a)(c,e,a),Object(o.a)(c,"formErrors",s),Object(o.a)(c,"payloadValid",n),Object(o.a)(c,"delayValid",t),c))})),v()},v=function(){c((function(e){return Object(i.a)(Object(i.a)({},e),{},{formValid:e.payloadValid&&e.delayValid})}))};return Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-sm-12",children:[Object(j.jsx)("h3",{children:"Send a request"}),Object(j.jsx)("p",{className:"lead alert alert-info",children:'The request will be sent to the appication which will reply after the specified "delay"'})]}),Object(j.jsx)("div",{children:Object(j.jsx)(m,{formErrors:r.formErrors})})]}),Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-sm-12",children:Object(j.jsxs)("form",{onSubmit:function(e){r.loading||(c((function(e){return Object(i.a)(Object(i.a)({},e),{},{responseError:""})})),c((function(e){return Object(i.a)(Object(i.a)({},e),{},{responseMessage:void 0})})),t(r.payload,r.delay)),e.preventDefault()},children:[Object(j.jsxs)("div",{className:"form-group row",children:[Object(j.jsx)("label",{htmlFor:"payload",className:"col-sm-2 col-form-label",children:"Payload"}),Object(j.jsx)("div",{className:"col-sm-10",children:Object(j.jsx)("textarea",{name:"payload",className:"form-control",placeholder:"Payload",onChange:l,value:r.payload})})]}),Object(j.jsxs)("div",{className:"form-group row",children:[Object(j.jsx)("label",{htmlFor:"delay",className:"col-sm-2 col-form-label",children:"Delay (in ms)"}),Object(j.jsx)("div",{className:"col-sm-10",children:Object(j.jsx)("input",{name:"delay",type:"number",className:"form-control",placeholder:"delay",value:r.delay,onChange:function(e){return l(e)}})})]}),Object(j.jsx)("div",{className:"form-group row",children:Object(j.jsxs)("div",{className:"col-sm-10",children:[!r.loading&&Object(j.jsx)("button",{name:"submit",className:"btn btn-primary",disabled:!r.formValid,children:"Submit"}),r.loading&&Object(j.jsx)("button",{name:"submit",className:"btn btn-primary disabled",disabled:!r.formValid,children:"Submit"})]})})]})})}),Object(j.jsx)(b,{loading:r.loading}),Object(j.jsx)(h,{responseMessage:r.responseMessage,responseError:r.responseError})]})},v=function(){return Object(j.jsx)(t.a,{children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("nav",{className:"navbar navbar-expand-md navbar-dark fixed-top bg-dark",children:[Object(j.jsx)(t.b,{to:"/",className:"navbar-brand",children:"Sample KNative Client"}),Object(j.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(j.jsx)("span",{className:"navbar-toggler-icon"})}),Object(j.jsx)("div",{className:"collapse navbar-collapse",id:"navbarsExampleDefault",children:Object(j.jsx)("ul",{className:"navbar-nav mr-auto",children:Object(j.jsx)("li",{className:"nav-item active",children:Object(j.jsx)(t.b,{to:"/",className:"nav-link",children:"Home"})})})})]}),Object(j.jsx)("div",{className:"containerFluid",children:Object(j.jsx)("div",{className:"row",children:Object(j.jsx)("div",{className:"col-sm-10 offset-sm-1",children:Object(j.jsx)(l.a,{exact:!0,path:"/",component:u})})})})]})})},p=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function O(e){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(Object(j.jsx)(v,{}),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("","/service-worker.js");p?(!function(e){fetch(e).then((function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):O(e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")}))):O(e)}))}}()}},[[32,1,2]]]);
//# sourceMappingURL=main.7b3e483d.chunk.js.map